/**
* @app GoolgeReviewWidget
* @desc A widget pulls up to 5 Google reviews using Google Place Javascript API
* @version 1.0.0
* @license The MIT License (MIT)
* @author Leo Lee
*/
!function(e,r,t){"use strict";var a={};a.helpers={extendObj:function(){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])arguments[e].hasOwnProperty(r)&&(arguments[e][r]&&arguments[e][r].constructor&&arguments[e][r].constructor===Object?(arguments[0][r]=arguments[e][r]||{},this.extendObj(arguments[0][r],arguments[e][r])):arguments[0][r]=arguments[e][r]);return arguments[0]},createElem:function(e,r){var t=document.createElement(e);for(var a in r)t[a]=r[a];return t},ellipsis:function(e,r){var t=e.textContent,i=t.split(/\s+/).length;if(i>r){var n=t.split(/\s+/,r).join(" ")+"...";e.textContent=n;var s=document.createElement("div"),l=a.helpers.createElem("a",{className:"rm-link"});l.textContent="Read More",s.appendChild(l),e.parentElement.appendChild(s),l.addEventListener("click",function(){"true"!==this.getAttribute("data-clicked")?(e.textContent=t,this.textContent="Read Less",this.setAttribute("data-clicked",!0)):(e.textContent=n,this.textContnet="Read More",this.setAttribute("data-clicked",!1))})}}},a.init=function(e){var r={target:"",placeid:"",theme:"dark",numOfWords:20,hasNav:!1};e=a.helpers.extendObj({},r,e),console.log(e);var t=document.querySelector(e.target);if(t){if(""===e.placeid||!google)return;var i=new google.maps.places.PlacesService(document.querySelector(e.target));i.getDetails({placeId:e.placeid},function(r,i){if(i===google.maps.places.PlacesServiceStatus.OK){var n=a.helpers.createElem("div",{className:"grw-wrapper"});t.appendChild(n);var s=a.helpers.createElem("div",{className:"google-reviews grw-theme-"+e.theme});n.appendChild(s);var l=a.buildWidgetHeader(r),d=a.buildReviews(r,e),o=a.buildWidgetFooter();if(s.appendChild(l),s.appendChild(d),s.appendChild(o),e.numOfWords>0){var c=document.querySelectorAll(".grw-review-content p");c.forEach(function(r,t){a.helpers.ellipsis(r,e.numOfWords)})}}})}},a.buildWidgetHeader=function(e){console.log(e);var r=e.name,t=e.url,i=e.rating,n=a.helpers.createElem("div",{className:"grw-business-header grw-clear-fix"});return n.innerHTML='<div class="grw-header-content-wrapper"><span class="grw-business-name"><a href="'+t+'" rel="nofollow" target="_blank" title="'+r+'">'+r+'</a></span><div class="grw-google-rating-content"><div class="grw-google-star-rating-wrapper"><div class="grw-google-star-rating" style="width:'+Math.round(67*i/5)+'px"></div></div></div><div class="grw-rating-value">'+i+" out of 5 stars</div></div>",n},a.buildReviews=function(e,r){var t="grw-reviews-wrapper",i="grw-review";r.hasNav&&(t="grw-reviews-wrapper grw-slider-wrapper",i="grw-review grw-review-slide");for(var n=a.helpers.createElem("div",{className:t}),s=e.reviews,l=0;l<s.length;l++){var d=s[l].author_name,o=s[l].rating,c=s[l].text,v='<div class="'+i+'"><div class="grw-author">'+d+'</div><div class="grw-review-rating"><div class="grw-google-star-rating-wrapper"><div class="grw-google-star-rating" style="width:'+Math.round(67*o/5)+'px"></div></div></div><div class="grw-review-content"><p>'+c+"</p></div></div>";n.innerHTML+=v}return n},a.buildWidgetFooter=function(){var e=a.helpers.createElem("div",{className:"grw-business-footer grw-clear-fix"});return e.innerHTML='<div class="poweredByGoogle"></div>',e},window.$GrwJS=a}(this,this.document);